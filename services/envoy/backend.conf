server {
    listen 80;
    server_name localhost;

    location / {
        add_header Content-Type application/json;
        return 200 '{"message": "Hello from backend", "timestamp": "$time_iso8601", "request_id": "$request_id"}';
    }

    location /api/test {
        add_header Content-Type application/json;
        add_header X-Request-ID $request_id;
        return 200 '{"status": "success", "message": "Test endpoint", "headers": "$http_user_agent"}';
    }

    location /api/echo {
        add_header Content-Type application/json;
        add_header X-Request-ID $request_id;
        
        # Echo back the request body for testing
        client_max_body_size 1M;
        return 200 '{"status": "echo", "method": "$request_method", "uri": "$request_uri", "headers": "$http_content_type"}';
    }
}
